  <%# ChartFlagOriginal - pie chart of flag colors %>
  <script type="text/javascript">

            var ctx = document.getElementById("GranuleChartFlagOriginal");

            var data = {
              labels: [
                  "Red",
                  "Blue",
                  "Yellow",
                  "Green"
              ],
              datasets: [
                  {
                      data: [<%=@original_metric_set.color_counts["red"]%>, <%=@original_metric_set.color_counts["blue"]%>, <%=@original_metric_set.color_counts["yellow"]%>, <%=@original_metric_set.color_counts["green"]%>],
                      backgroundColor: [
                          "#e84a34",
                          "#1b75ae",
                          "#ffce00",
                          "#3ab841"
                      ],
                      hoverBackgroundColor: [
                          "#e84a34",
                          "#1b75ae",
                          "#ffce00",
                          "#3ab841"
                      ]
                  }]
            };

            var myChart = new Chart(ctx, {
                type: 'doughnut',
                data: data,
                options: {
                  legend:{
                    display:false
                  },
                  maintainAspectRatio: false,
                  pieceLabel: {
                    mode: 'value',
                    fontSize: 18,
                    fontStyle: 'bold'
                  }
                }
              });

  </script>



  <%# ChartFlag - pie chart of current flag colors %>
  <script type="text/javascript">



    var ctx = document.getElementById("GranuleChartFlag");

    var data = {
      labels: [
          "Red",
          "Blue",
          "Yellow",
          "Green"
      ],
      datasets: [
          {
              data: [<%=@metric_set.color_counts["red"]%>, <%=@metric_set.color_counts["blue"]%>, <%=@metric_set.color_counts["yellow"]%>, <%=@metric_set.color_counts["green"]%>],
              backgroundColor: [
                  "#e84a34",
                  "#1b75ae",
                  "#ffce00",
                  "#3ab841"
              ],
              hoverBackgroundColor: [
                  "#e84a34",
                  "#1b75ae",
                  "#ffce00",
                  "#3ab841"
              ]
          }]
    };

    var myChart = new Chart(ctx, {
        type: 'doughnut',
        data: data,

        options: {
                    legend:{
                      display:false
                    },
                    maintainAspectRatio: false,
                    pieceLabel: {
                      mode: 'value',
                      fontSize: 18,
                      fontStyle: 'bold'
                    }
                 }
      });
  </script>




  
  <%# ChartErrors - chart showing the overall elements with the most errors found%>
  <script type="text/javascript">
    var ctx = document.getElementById("GranuleChartErrors");

    var data = {
        labels: <%= raw (@original_metric_set.element_non_green_count.take(10).map {|data_set| data_set[0]}) %>,
        datasets: [
            {
                label: "",
                backgroundColor: [
                    'rgba(105, 105, 105, 1)',
                    'rgba(105, 105, 105, 0.9)',
                    'rgba(105, 105, 105, 0.8)',
                    'rgba(105, 105, 105, 0.7)',
                    'rgba(105, 105, 105, 0.6)',
                    'rgba(105, 105, 105, 0.5)',
                    'rgba(105, 105, 105, 0.4)',
                    'rgba(105, 105, 105, 0.3)',
                    'rgba(105, 105, 105, 0.3)',
                    'rgba(105, 105, 105, 0.3)',
                ],
                data: <%= (@original_metric_set.element_non_green_count.take(10).map {|data_set| data_set[1]}) %>,
            }
        ]
    };

    var myChart = new Chart(ctx, {
        type: 'horizontalBar',
        data: data,

        options: {
          legend:{
            display:false
          },
          scales: {
            xAxes: [{
                barThickness: 20,
                scaleLabel: {
                  display: true,
                  labelString: 'Number of Non Green Flags Per Element'
                }
            }],
            yAxes: [{
              position: "right"
            }]
          },
          maintainAspectRatio: false
        }
    });
  </script>




  <%# ChartGuageOriginal - chart showing the quality score of original record 1-100%>
  <script>
    var chart = c3.generate({
        bindto: '#GranuleChartGuageOriginal',
        data: {
            columns: [
                ['data', <%= @original_metric_set.quality_done_records.inject(0.0) { |sum, el| sum + el } / @original_metric_set.quality_done_records.size %>]
            ],
            type: 'gauge'
        },
        color: {
            pattern: ['#FF0000', '#F97600', '#F6C600', '#60B044'], // the three color levels for the percentage values.
            threshold: {
                values: [30, 60, 80, 100]
            }
        },
        size: {
            height: 180
        }
    });

  </script>



  <%# ChartGuageUpdated - chart showing the quality score of updated record 1-100%>
  <script>
    var chart = c3.generate({
        bindto: '#GranuleChartGuageUpdated',
        data: {
            columns: [
                ['data', <%= @metric_set.quality_done_records.inject(0.0) { |sum, el| sum + el } / @metric_set.quality_done_records.size %>]
            ],
            type: 'gauge'
        },
        color: {
            pattern: ['#FF0000', '#F97600', '#F6C600', '#60B044'], // the three color levels for the percentage values.
            threshold: {
                values: [30, 60, 80, 100]
            }
        },
        size: {
            height: 180
        }
    });

  </script>