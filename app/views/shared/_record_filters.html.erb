<% path_for_form ||= home_path %>
<script type="text/javascript">
  function handleCheckboxChange(e, name) {
    console.log('value of checkbox : ', e.checked, name);
    document.getElementById(name).value=e.checked ? 'on' : 'off';
  }
  function onChangeColorFilter(e) {
    console.log('color change:', e);
    selectedValue = document.getElementById('color_code').value;
    if (selectedValue != 'None') {
      document.getElementById('color_code_filter_collection').checked=true;
    }
    console.log(selectedValue);
  }
</script>
<div class="record_filters searchbox_area">
  <p><strong>Filter Records:</strong></p>
  <%= form_with( url: path_for_form, method: "get", local: true) do %>
    <div class="record_filters__filters">
      <% if can?(:access, :filter_daac) %>
        <div class="record_filters__select">
          <%= label_tag(:daac, "DAAC") %>
          <%= select_tag(:daac, options_for_select(provider_select_list, selected: params[:daac])) %>
        </div>
      <% end %>

      <div class="record_filters__select">
        <span style="font-weight: bold">Campaign/Project</span>
        <%= select_tag(:campaign, options_for_select(campaign_select_list(form: path_for_form), selected: params[:campaign]), style: "width:190px") %>
      </div>
      <div class="record_filters__select">
        <span style="font-weight: bold">Color</span>
        <%= select_tag(:color_code, options_for_select([['','None'],['Error', 'red'],['Warning','yellow'],['Information','blue'],['Flagged','grey']], selected: params[:color_code]), onchange: 'onChangeColorFilter()') %>
        <span>
              <%# if params[:color_code_filter_collection].blank? ? true : params[:color_code_filter_collection] == 'on' %>
<!--                <input type="checkbox" id="color_code_filter_collection_id" name="color_code_filter_collection_id" onchange="handleCheckboxChange(this,'color_code_filter_collection')" checked>-->
<!--                <input type="hidden" id="color_code_filter_collection" name="color_code_filter_collection" value="on">-->
              <%# else %>
<!--                <input type="checkbox" id="color_code_filter_collection_id" name="color_code_filter_collection_id" onchange="handleCheckboxChange(this,'color_code_filter_collection')">-->
<!--                <input type="hidden" id="color_code_filter_collection" name="color_code_filter_collection" value="off">-->
              <%# end %>
              <%= check_box_tag(:color_code_filter_collection,nil,params[:color_code_filter_collection]) %>
              <%= label_tag(:color_code_filter_collection, "Collection") %>

              <%= check_box_tag(:color_code_filter_granule,nil,params[:color_code_filter_granule]) %>
              <%= label_tag(:color_code_filter_granule, "Granule") %></span>
      </div>
      <div class="record_filters__select">
        <label for="freetext">Freetext</label>
        <input type="search" name="freetext" id="freetext" class="freetext" style="width: 200px;" value="<%=params[:freetext]%>"/>
      </div>


      <%= submit_tag("Filter", class: "selectButton") %>

    </div>
    
  <% end %>

</div>
